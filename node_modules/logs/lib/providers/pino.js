"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const assert = require("assert");
function initialize(library, opts) {
    const pino = require("pino");
    let defaults = {};
    try {
        require("pino-pretty");
        defaults.prettyPrint = {
            colorize: true,
            translateTime: "SYS:standard"
        };
    }
    catch (e) {
    }
    const settings = Object.assign(Object.assign({ level: "info" }, defaults), opts);
    library.provider = {
        setLevel: function (level) {
            assert(level, "level can not be empty");
            settings.level = level;
        },
        getLogger: function (name, options) {
            var _a;
            const level = options.level || ((_a = options.parent) === null || _a === void 0 ? void 0 : _a.level) || settings.level;
            if (options.parent) {
                return options.parent.child({ name, level });
            }
            return pino(Object.assign(Object.assign(Object.assign(Object.assign({}, settings), { name }), options), { level }));
        }
    };
}
exports.initialize = initialize;
//# sourceMappingURL=pino.js.map